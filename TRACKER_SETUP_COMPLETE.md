# üéØ –ü–æ–≤–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–∫–µ—Ä–∞ —á–µ—Ä–µ–∑ GTM —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É

## –©–æ –±—É–ª–æ –¥–æ–¥–∞–Ω–æ

1. ‚úÖ **Google Tag Manager –ø—ñ–¥—Ç—Ä–∏–º–∫–∞** - —Ç—Ä–µ–∫–µ—Ä –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ GTM
2. ‚úÖ **Verification ping —Å–∏—Å—Ç–µ–º–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç—Ä–µ–∫–µ—Ä–∞
3. ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î verification pings —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π –º–µ—Ç–æ–¥
4. ‚úÖ **–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É** - –ø–æ–∫–∞–∑—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É —á–∏ —î —Ç—Ä–µ–∫–µ—Ä –Ω–∞ —Å–∞–π—Ç—ñ

---

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è verification pings

–ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
cd ~/affiliate-tracking
node scripts/add-tracker-verification-table.js
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É `tracker_verifications` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è verification pings.

---

## –ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Ç—Ä–µ–∫–µ—Ä —á–µ—Ä–µ–∑ Google Tag Manager

### –í–∞—Ä—ñ–∞–Ω—Ç A: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –≥–æ—Ç–æ–≤–∏–π –∫–æ–¥

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Google Tag Manager
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ç–µ–≥ —Ç–∏–ø—É "Custom HTML"
3. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–¥ –∑ —Ñ–∞–π–ª—É `public/gtm-install.html`
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ç—Ä–∏–≥–µ—Ä: "All Pages"
5. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: "High"
6. –ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ç–∞ –æ–ø—É–±–ª—ñ–∫—É–π—Ç–µ

### –í–∞—Ä—ñ–∞–Ω—Ç B: –ü—Ä—è–º–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–î–æ–¥–∞–π—Ç–µ –∫–æ–¥ –∑ `public/gtm-install.html` –≤ `<head>` –≤–∞—à–æ–≥–æ —Å–∞–π—Ç—É.

**–ü–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:** `GTM_SETUP.md`

---

## –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Ç—Ä–µ–∫–µ—Ä–∞

### –í –ø–∞–Ω–µ–ª—ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ "–°–∞–π—Ç–∏" (Websites) –∞–±–æ "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è" (Setup)
2. –î–æ–¥–∞–π—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è"
4. –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç—Ä–µ–∫–µ—Ä–∞:
- **Verification ping** - —Ç—Ä–µ–∫–µ—Ä –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î ping –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
- **HTML scraping** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (—è–∫—â–æ ping –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ)

---

## –Ø–∫ –ø—Ä–∞—Ü—é—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

### –ú–µ—Ç–æ–¥ 1: Verification Pings (–æ—Å–Ω–æ–≤–Ω–∏–π)

–¢—Ä–µ–∫–µ—Ä –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î verification ping –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω:
```
GET https://lehko.space/api/track/verify?code=YOUR_CODE&domain=your-site.com&version=gtm
```

–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –±—É–≤ ping –≤ –æ—Å—Ç–∞–Ω–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω:
- ‚úÖ **–Ø–∫—â–æ —Ç–∞–∫** - —Ç—Ä–µ–∫–µ—Ä –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (—Å—Ç–∞—Ç—É—Å: "–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ")
- ‚ùå **–Ø–∫—â–æ –Ω—ñ** - –ø–µ—Ä–µ–≤—ñ—Ä—è—î —á–µ—Ä–µ–∑ HTML scraping

### –ú–µ—Ç–æ–¥ 2: HTML Scraping (—Ä–µ–∑–µ—Ä–≤–Ω–∏–π)

–Ø–∫—â–æ verification ping –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ:
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î HTML —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Å–∞–π—Ç—É
2. –®—É–∫–∞—î —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Ç—Ä–µ–∫–µ—Ä–∞:
   - `tracker.js`
   - `TRACKER_CONFIG`
   - `api/track`
   - `aff_ref_code`
3. –í–∏–∑–Ω–∞—á–∞—î —Å—Ç–∞—Ç—É—Å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤

---

## –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É

### –í —Ä–æ–∑–¥—ñ–ª—ñ "–°–∞–π—Ç–∏"

–°—Ç–∞—Ç—É—Å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫:
- ‚úÖ **–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ** - —Ç—Ä–µ–∫–µ—Ä –∑–Ω–∞–π–¥–µ–Ω–æ
- ‚ùå **–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ** - —Ç—Ä–µ–∫–µ—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ

### –í —Ä–æ–∑–¥—ñ–ª—ñ "Dashboard"

–î–ª—è –∫–æ–∂–Ω–æ–≥–æ tracking –ø–æ—Å–∏–ª–∞–Ω–Ω—è:
- ‚úÖ **–ö–æ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ —Å–∞–π—Ç—É** - —Ç—Ä–µ–∫–µ—Ä –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- ‚ùå **–ö–æ–¥ –Ω–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –Ω–∞ —Å–∞–π—Ç** - —Ç—Ä–µ–∫–µ—Ä –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ú–µ—Ç–æ–¥ 1: –í –ø–∞–Ω–µ–ª—ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ "–°–∞–π—Ç–∏"
2. –î–æ–¥–∞–π—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è"
4. –°—Ç–∞—Ç—É—Å –æ–Ω–æ–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –ú–µ—Ç–æ–¥ 2: –í –±—Ä–∞—É–∑–µ—Ä—ñ

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à —Å–∞–π—Ç –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `?ref=TEST123`
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ DevTools (F12) ‚Üí Console
3. –ú–∞—î –±—É—Ç–∏ –≤–∏–¥–Ω–æ: `[Lehko Tracker GTM] Tracker initialized`

### –ú–µ—Ç–æ–¥ 3: Network –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ DevTools ‚Üí Network
2. –§—ñ–ª—å—Ç—Ä: `verify`
3. –ú–∞—î –±—É—Ç–∏ –∑–∞–ø–∏—Ç –¥–æ `https://lehko.space/api/track/verify`
4. –°—Ç–∞—Ç—É—Å: `200 OK`

---

## –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ

–ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
cd ~/affiliate-tracking
git pull origin main

# –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è verification pings
node scripts/add-tracker-verification-table.js

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å backend
pm2 restart affiliate-tracking-api

# –ü–µ—Ä–µ–±—É–¥—É–π—Ç–µ frontend
cd frontend
npm run build
sudo cp -r dist/* /var/www/lehko.space/
```

---

## –§–∞–π–ª–∏ –¥–ª—è GTM

- `public/gtm-install.html` - –≥–æ—Ç–æ–≤–∏–π –∫–æ–¥ –¥–ª—è GTM
- `public/gtm-tracker.js` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç
- `GTM_SETUP.md` - –ø–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

---

## –í–∞–∂–ª–∏–≤–æ!

- ‚úÖ Verification ping - –Ω–∞–π–Ω–∞–¥—ñ–π–Ω—ñ—à–∏–π –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- ‚úÖ –¢—Ä–µ–∫–µ—Ä –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î ping –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î pings –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω
- ‚úÖ HTML scraping –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –º–µ—Ç–æ–¥
- ‚úÖ –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Network –≤–∫–ª–∞–¥–∫—É –Ω–∞ –∑–∞–ø–∏—Ç–∏ –¥–æ API
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ –ø–∞–Ω–µ–ª—ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ backend: `pm2 logs affiliate-tracking-api`
