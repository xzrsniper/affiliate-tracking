import sequelize from '../config/database.js';
import PageStructure from '../models/PageStructure.js';
import dotenv from 'dotenv';

dotenv.config();

async function createTable() {
  try {
    console.log('üîÑ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ page_structures...');
    
    await PageStructure.sync({ force: false, alter: true });
    
    console.log('‚úÖ –¢–∞–±–ª–∏—Ü—è page_structures —Å—Ç–≤–æ—Ä–µ–Ω–∞/–æ–Ω–æ–≤–ª–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ!');
    
    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —î —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è home
    const existing = await PageStructure.findOne({ where: { page: 'home' } });
    
    if (!existing) {
      console.log('üîÑ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–ª—è home...');
      
      const defaultStructure = {
        sections: [
          {
            id: 'hero',
            type: 'hero',
            order: 1,
            visible: true,
            data: {
              title: '–í—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ',
              titleHighlight: '–ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫—ñ –ø—Ä–æ–≥—Ä–∞–º–∏',
              subtitle: '–∑ —Ç–æ—á–Ω—ñ—Å—Ç—é –¥–æ –∫–ª—ñ–∫—É',
              description: '–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è affiliate —Ç—Ä–∞—Ñ—ñ–∫—É –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º –∫–æ–Ω–≤–µ—Ä—Å—ñ–π —Ç–∞ –¥–æ—Ö–æ–¥—ñ–≤. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞ 2 —Ö–≤–∏–ª–∏–Ω–∏, –ø—Ä–∞—Ü—é—î –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É —Å–∞–π—Ç—ñ.',
              ctaText: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç',
              ctaLink: '/login',
              image: null
            }
          },
          {
            id: 'stats',
            type: 'stats',
            order: 2,
            visible: true,
            data: {
              items: [
                { value: '100%', label: '–¢–æ—á–Ω—ñ—Å—Ç—å –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è' },
                { value: '<2 —Ö–≤', label: '–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è' },
                { value: '24/7', label: '–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥' }
              ]
            }
          },
          {
            id: 'features',
            type: 'features',
            order: 3,
            visible: true,
            data: {
              title: '–í—Å—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ tracking',
              subtitle: '–í—Å–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–∞–º–∏',
              items: [
                {
                  icon: 'MousePointerClick',
                  title: '–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫–ª—ñ–∫—ñ–≤',
                  description: '–¢–æ—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–∂–Ω–æ–º—É tracking –ø–æ—Å–∏–ª–∞–Ω–Ω—é –∑ —Ä–æ–∑–±–∏–≤–∫–æ—é –Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —Ç–∞ –∑–∞–≥–∞–ª—å–Ω—ñ –∫–ª—ñ–∫–∏'
                },
                {
                  icon: 'TrendingUp',
                  title: '–ö–æ–Ω–≤–µ—Ä—Å—ñ—ó —Ç–∞ –¥–æ—Ö–æ–¥–∏',
                  description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫–æ–Ω–≤–µ—Ä—Å—ñ–π —Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—ñ–≤ –≤—ñ–¥ –≤–∞—à–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º'
                },
                {
                  icon: 'Shield',
                  title: '–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å',
                  description: '–ó–∞—Ö–∏—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é visitor fingerprint –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è'
                },
                {
                  icon: 'Zap',
                  title: '–ü—Ä–æ—Å—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è',
                  description: '–û–¥–∏–Ω —Ä—è–¥–æ–∫ –∫–æ–¥—É –∞–±–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Google Tag Manager - –ø—Ä–∞—Ü—é—î –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É —Å–∞–π—Ç—ñ'
                },
                {
                  icon: 'BarChart3',
                  title: '–î–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞',
                  description: '–ü–æ–≤–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∂–µ—Ä–µ–ª–∞–º —Ç—Ä–∞—Ñ—ñ–∫—É, –∫–æ–Ω–≤–µ—Ä—Å—ñ—è–º —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∫–∞–º–ø–∞–Ω—ñ–π'
                },
                {
                  icon: 'Globe',
                  title: '–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—Å—Ç—å',
                  description: '–ü—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–∏–º–∏ e-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ —Ç–∞ —Å–∏—Å—Ç–µ–º–∞–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º'
                }
              ]
            }
          },
          {
            id: 'benefits',
            type: 'benefits',
            order: 4,
            visible: true,
            data: {
              title: '–ß–æ–º—É –æ–±–∏—Ä–∞—é—Ç—å –Ω–∞—Å?',
              description: '–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è affiliate —Ç—Ä–∞—Ñ—ñ–∫—É –∑ —É—Å—ñ–º–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏',
              items: [
                '–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫–ª—ñ–∫—ñ–≤ —Ç–∞ –∫–æ–Ω–≤–µ—Ä—Å—ñ–π',
                '–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ visitor fingerprint –¥–ª—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤',
                '–ì–Ω—É—á–∫—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª —Ç—Ä–∞—Ñ—ñ–∫—É',
                'API –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ –≤–∞—à–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏',
                '–î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –∑–≤—ñ—Ç–∏',
                '–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π —Å—Ç–∞—Ä—Ç –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è'
              ],
              stats: [
                { value: '1000+', label: '–ê–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤' },
                { value: '1M+', label: '–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–∏—Ö –∫–ª—ñ–∫—ñ–≤' },
                { value: '$10M+', label: '–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–∏—Ö –¥–æ—Ö–æ–¥—ñ–≤' }
              ]
            }
          },
          {
            id: 'cta',
            type: 'cta',
            order: 5,
            visible: true,
            data: {
              title: '–ì–æ—Ç–æ–≤—ñ –ø–æ—á–∞—Ç–∏?',
              description: '–°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∞–∫–∞—É–Ω—Ç –∑–∞ —Ö–≤–∏–ª–∏–Ω—É —Ç–∞ –ø–æ—á–Ω—ñ—Ç—å –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –≤–∞—à affiliate —Ç—Ä–∞—Ñ—ñ–∫ –≤–∂–µ —Å—å–æ–≥–æ–¥–Ω—ñ',
              buttonText: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ',
              buttonLink: '/login'
            }
          }
        ]
      };
      
      await PageStructure.create({
        page: 'home',
        structure: defaultStructure
      });
      
      console.log('‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞!');
    } else {
      console.log('‚ÑπÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è home –≤–∂–µ —ñ—Å–Ω—É—î');
    }
    
    process.exit(0);
  } catch (error) {
    console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error);
    process.exit(1);
  }
}

createTable();

